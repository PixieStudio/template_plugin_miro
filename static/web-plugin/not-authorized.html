<!DOCTYPE html>
<html lang="en">

<head>
	<script type="text/javascript" src="https://miro.com/app/static/sdk.1.1.js"></script>
</head>

<body>
	<h2 data-i18n="auth.not_auth"></h2>
	<button class="auth-app" data-i18n="auth.button"></button>
	<script>
		document.querySelector('button').addEventListener('click', function () {
			const authorizeOptions = {
				response_type: 'token',
				redirect_uri: 'https://' + window.location.host + '/static/web-plugin/auth-success.html'
			}
			miro.authorize(authorizeOptions)
				.then(() => miro.getToken())
				.then((token) => {
					if (token) {
						miro.board.ui.closeModal('success')
					} else {
						console.log('Quelque chose a mal tourn√© !')
					}
				})
		})
	</script>
	<script type="text/javascript" src="./js/classes.js"></script>
</body>

</html>
